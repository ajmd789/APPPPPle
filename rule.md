# Android 开发代码规范

## 1. XML 布局文件规范

### 1.1 文件声明
- XML 文件必须以正确的声明开始：
  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  ```
- 声明后不能有空行，直接开始根元素

### 1.2 命名空间
- 必须声明必要的命名空间：
  ```xml
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:app="http://schemas.android.com/apk/res-auto"
  ```
- 命名空间声明必须在根元素中

### 1.3 布局结构
- 使用合适的根布局（LinearLayout、ConstraintLayout 等）
- 保持合理的嵌套层级，避免过度嵌套
- 使用 `match_parent` 和 `wrap_content` 替代具体的尺寸值
- 使用 `dp` 作为尺寸单位，`sp` 作为文字大小单位

### 1.4 资源引用
- 使用 `@+id/` 定义新 ID
- 使用 `@id/` 引用已有 ID
- 使用 `@android:color/` 引用系统颜色
- 使用 `@string/` 引用字符串资源
- 使用 `@dimen/` 引用尺寸资源

## 2. Java/Kotlin 代码规范

### 2.1 包结构
- 遵循 Clean Architecture 原则：
  ```
  com.example.app/
  ├── data/          // 数据层
  │   ├── model/     // 数据模型
  │   ├── local/     // 本地数据源
  │   └── repository/ // 数据仓库
  ├── domain/        // 业务逻辑层
  │   ├── usecase/   // 用例
  │   └── model/     // 领域模型
  └── ui/            // 界面层
      ├── activity/  // 活动
      ├── fragment/  // 片段
      └── adapter/   // 适配器
  ```

### 2.2 类命名
- Activity 类名以 `Activity` 结尾
- Fragment 类名以 `Fragment` 结尾
- Adapter 类名以 `Adapter` 结尾
- ViewHolder 类名以 `ViewHolder` 结尾
- 接口名以 `I` 开头或以 `able` 结尾
- 抽象类名以 `Abstract` 开头

### 2.3 方法命名
- 获取数据的方法以 `get` 开头
- 设置数据的方法以 `set` 开头
- 判断方法以 `is` 或 `has` 开头
- 事件处理方法以 `on` 开头
- 异步方法以 `async` 开头

### 2.4 变量命名
- 成员变量以 `m` 开头
- 静态变量以 `s` 开头
- 常量全部大写，用下划线分隔
- 布局控件 ID 与变量名保持一致

## 3. 资源文件规范

### 3.1 命名规则
- 布局文件：`activity_xxx.xml`、`fragment_xxx.xml`、`item_xxx.xml`
- 菜单文件：`menu_xxx.xml`
- 字符串资源：使用小写字母和下划线
- 颜色资源：使用小写字母和下划线
- 尺寸资源：使用小写字母和下划线

### 3.2 资源组织
- 将相关资源放在同一目录下
- 使用子目录组织大量资源
- 避免资源名称冲突
- 使用前缀区分不同类型的资源

## 4. 错误处理规范

### 4.1 异常处理
- 捕获具体异常而不是通用 Exception
- 记录异常日志
- 向用户显示友好的错误信息
- 在适当的地方处理异常

### 4.2 空值处理
- 使用 `@Nullable` 和 `@NonNull` 注解
- 检查参数是否为 null
- 使用 Optional 处理可能为空的值
- 避免返回 null

## 5. 性能优化规范

### 5.1 内存管理
- 及时释放不需要的资源
- 避免内存泄漏
- 使用弱引用处理可能的内存泄漏
- 注意大对象的生命周期

### 5.2 布局优化
- 使用 `merge` 标签减少布局层级
- 使用 `include` 标签重用布局
- 避免过度绘制
- 使用 `ViewStub` 延迟加载

### 5.3 线程处理
- 主线程只处理 UI 操作
- 耗时操作放在子线程
- 使用线程池管理线程
- 注意线程同步问题

## 6. 安全规范

### 6.1 数据安全
- 敏感数据加密存储
- 使用安全的网络传输
- 避免硬编码敏感信息
- 使用 ProGuard 混淆代码

### 6.2 权限管理
- 只申请必要的权限
- 运行时检查权限
- 处理权限被拒绝的情况
- 向用户解释权限用途

## 7. 测试规范

### 7.1 单元测试
- 为关键业务逻辑编写单元测试
- 使用 JUnit 和 Mockito
- 测试边界条件
- 保持测试代码简洁

### 7.2 UI 测试
- 使用 Espresso 编写 UI 测试
- 测试用户交互流程
- 测试异常情况
- 保持测试稳定性 

## 8. 注意代码引用
- 保持代码引用正确，先写好要引用的代码然后再引入 而不是引入一个不存在的方法或者文件
